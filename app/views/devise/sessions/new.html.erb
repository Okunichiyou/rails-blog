<div class="flex justify-center">
  <%= render Ui::PanelComponent.new(size: :large) do |panel| %>
    <%- panel.with_panel_content do %>
      <h1 class="mb-6">ログイン</h1>

      <%- unless Rails.configuration.auth_enabled %>
        <%= render Ui::FlashComponent.new(flash_type: :warn,) do |flash| %>
          <%- flash.with_flash_content do %>
            <p>現在、ユーザー登録機能は提供されていません</p>
          <% end %>
        <% end %>
      <% end %>

      <% flash.each do |type, message| %>
        <%= render Ui::FlashComponent.new(flash_type: type.to_sym) do |c| %>
          <%- c.with_flash_content do %>
            <%= message %>
          <% end %>
        <% end %>
      <% end %>

      <div class="flex flex-col md:flex-row gap-6">
        <!-- 左側: SNSログイン -->
        <div class="flex-1 flex flex-col justify-center items-center">
          <%= form_with url: sns_credential_google_oauth2_omniauth_authorize_path, method: :post, data: { turbo: false }, html: { class: "w-full" } do %>
            <%= render Ui::Button::IconComponent.new(
              category: :secondary,
              size: :full,
              type: :submit,
              text: "Googleでログイン",
              icon: image_tag("google-icon.png", class: "w-5 h-5"),
              icon_position: :left
            ) %>
          <% end %>
        </div>

        <!-- 区切り線: モバイルは横線、デスクトップは縦線 -->
        <div class="border-t md:border-t-0 md:border-l border-secondary"></div>

        <!-- 右側: DBログインフォーム -->
        <div class="flex-1 min-w-0">
          <%= render Domain::User::LoginFormComponent.new(
            resource: resource,
            resource_name: resource_name
          ) %>
        </div>
      </div>
    <% end %>
  <% end %>
</div>
