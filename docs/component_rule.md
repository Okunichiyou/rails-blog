# コンポーネントルール

## ディレクトリ構成

```text
app/components
├── domain
└── ui
```

### domain

- Active RecordのオブジェクトやAPIレスポンスのオブジェクトなど、アプリケーション固有の情報を汎用コンポーネントに置き換える事が責務

### ui

- ボタンとか、カードとか見た目のパーツを扱うコンポーネント
- 引数はキーワード引数を使っていく
  - 仕様変更で引数が増えていく事は割と考えられ、位置引数だと順番変更のバグを意識する必要が出てくるので安全さを重視する
- キーワードを用意するものは、以下のパターンのどれかに当てはまるもの
  - 入力必須にしたいもの
  - デフォルト値を設定したいもの
  - HTML属性やイベント属性でない、コンポーネントのロジックのために受け入れたいもの
    - ex: buttonでいうアイコンみたいに、HTMLでデフォルトで用意されていないもの
- 引数を用意する際は、filter_attributeメソッドでフィルターすることを検討する
  - 何の属性を期待しているかを明確にするために、コンポーネントクラス内でホワイトリストを用意し、受け入れ可能な値を明示しておく
- 任意のHTML属性を受け入れられるようにするために、`html_options`をスプラット演算子で受け入れるようにしておく
  - 例えば、emailフィールドの`autofocus: true`みたいに、明示的に受け入れ口を用意するとキリがないけど、どこかの場面では付与したいみたいな場面がUIコンポーネントはあり得るので、予め任意の属性を受け入れられるようにしておく方針

## デザインルール

色やフォントサイズなどデザイン要素に関わるものは、まず`app/assets/tailwind/application.css`を参照する。

`app/assets/tailwind/application.css`に用意されていない色やフォントスタイルを追加したくなった場合は、画面独自に定義するのではなく、`app/assets/tailwind/application.css`にデザイントークンを追加して対応することを検討する。

デザインの基本方針は以下。

- コントラスト比はAA以上は必須
  - 極力AAAの比率を目指すが、AAAに出来ない場合やAAAにすると視覚的な意味合いが薄れてしまう場合はAAにすることも可能
    - 例えば、プライマリーカラーはどの色と組み合わせてもAAAにすることはできないので、プライマリボタンの文字色はAAを目指すことになる。アラートメッセージ内の文字色も、AAAを目指そうとすると伝えたかった危険性の意味合いが薄れてしまうようであればAAで赤みを増やしても良い
